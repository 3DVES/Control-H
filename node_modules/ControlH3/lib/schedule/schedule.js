var scheduleSchema = require('../models/scheduleSchema')

function Schedule(){

}

Schedule.prototype.addSchedule= function(schedule,callback){	
	var newSchedule = new scheduleSchema(schedule);
	newSchedule.save(function(error,scheduleResult){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!scheduleResult){
				return callback(null,null);				
			}
			else{
				return callback(null,scheduleResult);
			}
		}
	});
};

Schedule.prototype.getSchedulesByIdUser= function(idUser, callback){
	scheduleSchema.find({idUser:idUser},function(error,userSchedules){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!userSchedules){
				return callback(null,null);				
			}
			else{
				return callback(null,userSchedules);
			}
		}
	});
};

Schedule.prototype.getSchedulesUsers= function(callback){
	scheduleSchema.find({},function(error,usersSchedules){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!usersSchedules){
				return callback(null,null);				
			}
			else{
				return callback(null,usersSchedules);
			}
		}
	});
};

Schedule.prototype.patchScheduleById = function(id, info, callback){
	scheduleSchema.findOne({_id:id}, function(error,schedule){
		if(error){
			return callback(error,null);
		}else if(!schedule){
			return callback("Could not find the schedule with the provided ID",null);
		}else{
			if(info) schedule.day = info;
			schedule.save(function(error,response){
				if(error){
					return callback(error,null);
				}else {
					return callback(null,response);
				}
			});
		}
	});
};


var Schedule = module.exports= new Schedule();
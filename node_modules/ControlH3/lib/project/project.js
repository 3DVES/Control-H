var ProjectSchema = require('../models/projectSchema')

function Project(){

}

Project.prototype.addProject= function(info,callback){	
	var project= new ProjectSchema(info);
	project.save(function(error,response){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!response){
				return callback(null,null);				
			}
			else{
				return callback(null,response);
			}
		}
	});
};

Project.prototype.getProjects= function(callback){
	ProjectSchema.find({},function(error,response){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!response){
				return callback(null,null);				
			}
			else{
				return callback(null,response);
			}
		}
	});
};

Project.prototype.getProjectById = function(id, callback){
	ProjectSchema.findOne({_id:id},function(error,response){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!response){
				return callback(null,null);				
			}
			else{
				return callback(null,response);
			}
		}
	});
};

Project.prototype.patchProjectById = function(id, info, callback){
	ProjectSchema.findOne({_id:id},function(error,project){
		if(error){
			return callback(error,null);
		}else if(!project){
			return callback("Could not find the project with the provided ID",null);
		}else{
			if (info.name) project.name = info.name;
			if(info.customer) project.customer = info.customer;
			if(info.version) project.version = info.version;
			if(info.about) project.about = info.about;
			if(info.finishDate) project.finishDate = info.finishDate;
			project.save(function(error,response){
				if(error){
					return callback(error,null);
				}else {
					return callback(null,response);
				}
			});
		}
	});
}

var Project= module.exports= new Project();
var ProjectSchema = require('../models/projectSchema')

function Project(){

}

Project.prototype.addProject= function(info,callback){	
	var project= new ProjectSchema(info);
	project.save(function(error,response){
		if(error){
			return callback(error, null);			
		}
		else{
			if(!response){
				return callback(null,null);				
			}
			else{
				return callback(null, response);
			}
		}
	});
};

Project.prototype.getProjects= function(callback){
	ProjectSchema.find({},function(error, response){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!response){
				return callback(null, null);				
			}
			else{
				return callback(null,response);
			}
		}
	});
};

Project.prototype.getProjectById = function(id, callback){
	ProjectSchema.findOne({_id:id},function(error,response){
		if(error){
			return callback(error,null);			
		}
		else{
			if(!response){
				return callback(null,null);				
			}
			else{
				return callback(null,response);
			}
		}
	});
};

Project.prototype.patchProjectById = function(id, info, callback){
	ProjectSchema.findOne({_id:id},function(err,project){
		if(err){
			return callback(err,null);
		}else if(!project){
			return callback(null, null);
		}else{
			if(info.name != undefined) project.name = info.name;
			if(info.customer != undefined) project.customer = info.customer;
			if(info.version != undefined) project.version = info.version;
			if(info.about != undefined) project.about = info.about;
			if(info.finishDate != undefined) project.finishDate = info.finishDate;
			project.save(function(error,response){
				if(error){
					return callback(error,null);
				}else {
					return callback(null,response);
				}
			});
		}
	});
}

var Project= module.exports= new Project();
var autoIncrement = require('mongoose-auto-increment');
var mongoose = require('mongoose'),
    Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

var connection = mongoose.createConnection("mongodb://localhost/ControlH3");
    autoIncrement.initialize(connection);

var historySchema= new Schema({
    _id : {type: Number, required: true, index: {unique: true}},
    backlogId : {type: Number, required : true, index : {unique : false}},
    name : {type: String, required: true},
    description : {type: String, required : true},
    by : {type : String, required: true},
    utility : {type: String, required: true},
    notes : {type: String},
    //consider the possibility of limiting the number of states: Indeed, developing, testing, etc ...
    status: {type: String, required: true}
});

historySchema.plugin(autoIncrement.plugin, 'history');
module.exports = mongoose.model('history', historySchema);